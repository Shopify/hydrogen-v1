#import './SellingPlanFragment.graphql'
#import '../../components/Money/MoneyFragment.graphql'
#import '../../components/Image/ImageFragment.graphql'
#import '../../components/UnitPrice/UnitPriceFragment.graphql'

fragment VariantFragment on ProductVariant {
  id
  title
  availableForSale
  image {
    ...ImageFragment
  }
  ...UnitPriceFragment
  priceV2 {
    currencyCode
    amount
  }
  compareAtPriceV2 {
    currencyCode
    amount
  }
  selectedOptions {
    name
    value
  }
  metafields(first: $numProductVariantMetafields) {
    edges {
      node {
        ...MetafieldFragment
      }
    }
  }
  sellingPlanAllocations(first: $numProductVariantSellingPlanAllocations) {
    edges {
      node {
        priceAdjustments {
          compareAtPrice {
            currencyCode
            amount
          }
          perDeliveryPrice {
            currencyCode
            amount
          }
          price {
            currencyCode
            amount
          }
          unitPrice {
            currencyCode
            amount
          }
        }
        sellingPlan {
          id
          description
          name
          options {
            name
            value
          }
          priceAdjustments {
            orderCount
            adjustmentValue {
              ... on SellingPlanFixedAmountPriceAdjustment {
                adjustmentAmount {
                  currencyCode
                  amount
                }
              }
              ... on SellingPlanFixedPriceAdjustment {
                price {
                  currencyCode
                  amount
                }
              }
              ... on SellingPlanPercentagePriceAdjustment {
                adjustmentPercentage
              }
            }
          }
          recurringDeliveries
        }
      }
    }
  }
}
