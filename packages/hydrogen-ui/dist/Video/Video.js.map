{"version":3,"file":"Video.js","sources":["../../src/Video/Video.tsx"],"sourcesContent":["import {ImageSizeOptions, useImageUrl} from '../Image/image_size';\nimport type {Video as VideoType} from '../storefront-api-types';\nimport type {PartialDeep} from 'type-fest';\n\ninterface VideoProps {\n  /** An object with fields that correspond to the Storefront API's [Video object](https://shopify.dev/api/storefront/latest/objects/video). */\n  data: PartialDeep<VideoType>;\n  /** An object of image size options for the video's `previewImage`. */\n  options?: ImageSizeOptions;\n}\n\n/**\n * The `Video` component renders a `video` for the Storefront API's [Video object](https://shopify.dev/api/storefront/reference/products/video).\n */\nexport function Video(props: JSX.IntrinsicElements['video'] & VideoProps) {\n  const {\n    data,\n    options,\n    id = data.id,\n    playsInline = true,\n    controls = true,\n    ...passthroughProps\n  } = props;\n\n  const posterUrl = useImageUrl(\n    data.previewImage?.url as string | undefined,\n    options\n  );\n\n  if (!data.sources) {\n    throw new Error(`<Video/> requires a 'data.sources' array`);\n  }\n\n  return (\n    // eslint-disable-next-line jsx-a11y/media-has-caption\n    <video\n      {...passthroughProps}\n      id={id}\n      playsInline={playsInline}\n      controls={controls}\n      poster={posterUrl}\n      data-testid=\"video\"\n    >\n      {data.sources.map((source) => {\n        if (!(source?.url && source?.mimeType)) {\n          throw new Error(`<Video/> needs 'source.url' and 'source.mimeType'`);\n        }\n        return (\n          <source\n            key={source.url}\n            src={source.url}\n            type={source.mimeType}\n            data-testid=\"video-screen\"\n          ></source>\n        );\n      })}\n    </video>\n  );\n}\n"],"names":["props","data","options","id","playsInline","controls","passthroughProps","posterUrl","useImageUrl","previewImage","url","sources","Error","map","source","mimeType"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcO,eAAeA,OAAoD;;AAClE,QAOFA,YANFC;AAAAA;AAAAA,IACAC;AAAAA,IACAC,KAAKF,KAAKE;AAAAA,IACVC,cAAc;AAAA,IACdC,WAAW;AAAA,MAETL,IADCM,6BACDN,IADCM;AAAAA,IALHL;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA;AAIF,QAAME,YAAYC,YAChBP,WAAKQ,iBAALR,mBAAmBS,KACnBR,OAF2B;AAKzB,MAAA,CAACD,KAAKU,SAAS;AACX,UAAA,IAAIC,MAAO,0CAAX;AAAA,EACP;AAED,6BAEE,SAAA,iCACMN,mBADN;AAAA,IAEE;AAAA,IACA;AAAA,IACA;AAAA,IACA,QAAQC;AAAAA,IACR,eAAY;AAAA,IANd,UAQGN,KAAKU,QAAQE,IAAKC,CAAW,WAAA;AAC5B,UAAI,CAAEA,mCAAQJ,QAAOI,kCAAQC,YAAW;AAChC,cAAA,IAAIH,MAAO,mDAAX;AAAA,MACP;AACD,iCACE,UAAA;AAAA,QAEE,KAAKE,OAAOJ;AAAAA,QACZ,MAAMI,OAAOC;AAAAA,QACb,eAAY;AAAA,MAAA,GAHPD,OAAOJ,GADd;AAAA,IAAA,CALH;AAAA,EAAA,EARH;AAuBH;;"}