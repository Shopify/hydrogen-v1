"use strict";(self.webpackChunkdocs_v_1=self.webpackChunkdocs_v_1||[]).push([[8165],{5680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>m});var r=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},g=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=l(n),g=o,m=c["".concat(u,".").concat(g)]||c[g]||d[g]||a;return n?r.createElement(m,s(s({ref:t},p),{},{components:n})):r.createElement(m,s({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=g;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[c]="string"==typeof e?e:o,s[1]=i;for(var l=2;l<a;l++)s[l]=n[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}g.displayName="MDXCreateElement"},7041:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var r=n(8168),o=(n(6540),n(5680));const a={},s="useRequestContext",i={unversionedId:"hooks/framework/userequestcontext",id:"hooks/framework/userequestcontext",title:"useRequestContext",description:"Experimental feature",source:"@site/docs/hooks/framework/userequestcontext.md",sourceDirName:"hooks/framework",slug:"/hooks/framework/userequestcontext",permalink:"/hydrogen-v1/hooks/framework/userequestcontext",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"hydrogen",previous:{title:"useNavigate",permalink:"/hydrogen-v1/hooks/framework/usenavigate"},next:{title:"useRouteParams",permalink:"/hydrogen-v1/hooks/framework/userouteparams"}},u={},l=[{value:"Example code",id:"example-code",level:2},{value:"Arguments",id:"arguments",level:2},{value:"Return value",id:"return-value",level:2},{value:"Considerations",id:"considerations",level:2}],p={toc:l},c="wrapper";function d(e){let{components:t,...n}=e;return(0,o.yg)(c,(0,r.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"userequestcontext"},"useRequestContext"),(0,o.yg)("aside",{class:"note beta"},(0,o.yg)("h4",null,"Experimental feature"),(0,o.yg)("p",null,"Request context is an experimental feature. As a result, functionality is subject to change. You can provide feedback on this feature by ",(0,o.yg)("a",{href:"https://github.com/Shopify/hydrogen/issues"},"submitting an issue in GitHub"),".")),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"useRequestContext")," hook provides access to a request-scoped context to share data across multiple React Server Components while running on the server. It's useful for writing plugins and third-party libraries."),(0,o.yg)("h2",{id:"example-code"},"Example code"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="App.server.jsx"',title:'"App.server.jsx"'},"import {useRequestContext} from '@shopify/hydrogen';\n\nconst pluginName = 'my-plugin';\n\nfunction installMyPlugin() {\n  const context = useRequestContext(pluginName);\n  context.installed = true;\n}\n\nfunction useMyPlugin() {\n  return useRequestContext(pluginName);\n}\n\nfunction App() {\n  installMyPlugin();\n\n  return /* ... */;\n}\n\nfunction SomeOtherServerComponent() {\n  const data = useMyPlugin();\n  return <div>{data.installed}</div>\n}\n")),(0,o.yg)("h2",{id:"arguments"},"Arguments"),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"useRequestContext")," hook takes the following arguments:"),(0,o.yg)("table",null,(0,o.yg)("thead",{parentName:"table"},(0,o.yg)("tr",{parentName:"thead"},(0,o.yg)("th",{parentName:"tr",align:null},"Key"),(0,o.yg)("th",{parentName:"tr",align:null},"Required"),(0,o.yg)("th",{parentName:"tr",align:null},"Description"))),(0,o.yg)("tbody",{parentName:"table"},(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},(0,o.yg)("inlineCode",{parentName:"td"},"scope")),(0,o.yg)("td",{parentName:"tr",align:null},"No"),(0,o.yg)("td",{parentName:"tr",align:null},"A string to encapsulate data so that it's not modified by other scopes.")))),(0,o.yg)("h2",{id:"return-value"},"Return value"),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"useRequestContext")," hook returns an object that can be mutated to store data."),(0,o.yg)("h2",{id:"considerations"},"Considerations"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Consider using the ",(0,o.yg)("inlineCode",{parentName:"li"},"useRequestContext")," hook only where appropriate. Generally, you should pass props down to the components instead. Use it to cache data across multiple React rendering cycles, or to share data across components that are located in different tree branches."),(0,o.yg)("li",{parentName:"ul"},"The ",(0,o.yg)("inlineCode",{parentName:"li"},"useRequestContext")," hook is only available when running on the server in server components or client components during server-side rendering (SSR). The hook is never shared in the browser.")))}d.isMDXComponent=!0}}]);