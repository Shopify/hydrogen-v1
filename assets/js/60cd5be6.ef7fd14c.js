"use strict";(self.webpackChunkdocs_v_1=self.webpackChunkdocs_v_1||[]).push([[2404],{5654:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var r=n(8168),a=(n(6540),n(5680));const o={},i="Testing best practices for Hydrogen",s={unversionedId:"tutorials/best-practices/testing",id:"tutorials/best-practices/testing",title:"Testing best practices for Hydrogen",description:"Hydrogen 2.0 is out now. These archival Hydrogen 1.0 docs are provided only to assist developers during their upgrade process. Please migrate as soon as possible.",source:"@site/docs/tutorials/best-practices/testing.md",sourceDirName:"tutorials/best-practices",slug:"/tutorials/best-practices/testing",permalink:"/hydrogen-v1/tutorials/best-practices/testing",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"hydrogen",previous:{title:"Performance best practices for Hydrogen",permalink:"/hydrogen-v1/tutorials/best-practices/performance"},next:{title:"Hydrogen configuration",permalink:"/hydrogen-v1/tutorials/configuration/"}},l={},p=[{value:"Running tests",id:"running-tests",level:2},{value:"Catching common issues",id:"catching-common-issues",level:2},{value:"Hydrogen rules",id:"hydrogen-rules",level:3},{value:"Next steps",id:"next-steps",level:2}],g={toc:p},c="wrapper";function u(e){let{components:t,...n}=e;return(0,a.yg)(c,(0,r.A)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"testing-best-practices-for-hydrogen"},"Testing best practices for Hydrogen"),(0,a.yg)("admonition",{type:"tip"},(0,a.yg)("p",{parentName:"admonition"},"Hydrogen 2.0 is out now. These archival Hydrogen 1.0 docs are provided only to assist developers during their upgrade process. Please ",(0,a.yg)("a",{parentName:"p",href:"/migrate"},"migrate")," as soon as possible.")),(0,a.yg)("p",null,"When testing your Hydrogen storefront, make sure you have accounted for any issues that might occur when customers visit your live storefront."),(0,a.yg)("p",null,"This guide describes best practices for testing your Hydrogen storefront."),(0,a.yg)("h2",{id:"running-tests"},"Running tests"),(0,a.yg)("p",null,"The ",(0,a.yg)("a",{parentName:"p",href:"/tutorials/getting-started/templates/"},"Demo Store template")," contains basic end-to-end (E2E) tests in the ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/Shopify/hydrogen/tree/main/templates/demo-store/tests/e2e"},(0,a.yg)("inlineCode",{parentName:"a"},"/tests/e2e"))," folder. The E2E tests are powered by ",(0,a.yg)("a",{parentName:"p",href:"https://vitest.dev"},"Vitest")," and ",(0,a.yg)("a",{parentName:"p",href:"https://playwright.dev"},"Playwright"),"."),(0,a.yg)("p",null,"You can use the following command to run tests in development:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"\nyarn test\n")),(0,a.yg)("p",null,"To run tests in a continuous-integration (CI) environment like GitHub Actions, you can use the following command:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"\nyarn test:ci\n")),(0,a.yg)("h2",{id:"catching-common-issues"},"Catching common issues"),(0,a.yg)("p",null,"Hydrogen provides an ",(0,a.yg)("a",{parentName:"p",href:"/tutorials/eslint/"},"ESLint plugin")," that enforces Shopify\u2019s JavaScript best practices and catches common issues when using ",(0,a.yg)("a",{parentName:"p",href:"/tutorials/react-server-components/"},"React Server Components")," in Hydrogen apps."),(0,a.yg)("h3",{id:"hydrogen-rules"},"Hydrogen rules"),(0,a.yg)("p",null,"If you ",(0,a.yg)("a",{parentName:"p",href:"/hydrogen-v1/tutorials/eslint#installation"},"install the ESLint plugin")," and enable the ",(0,a.yg)("a",{parentName:"p",href:"/tutorials/eslint#hydrogen-configuration"},"Hydrogen configuration"),", then the following Hydrogen rules are included:"),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Rule"),(0,a.yg)("th",{parentName:"tr",align:null},"Description"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},(0,a.yg)("a",{parentName:"td",href:"https://github.com/Shopify/hydrogen/tree/main/packages/eslint-plugin/src/rules/server-component-banned-hooks"},"server-component-banned-hooks")),(0,a.yg)("td",{parentName:"tr",align:null},"Prevents using the ",(0,a.yg)("inlineCode",{parentName:"td"},"useState"),", ",(0,a.yg)("inlineCode",{parentName:"td"},"useReducer"),", ",(0,a.yg)("inlineCode",{parentName:"td"},"useEffect"),", and ",(0,a.yg)("inlineCode",{parentName:"td"},"useLayoutEffect")," hooks in files that don't end with the ",(0,a.yg)("inlineCode",{parentName:"td"},".client")," extension")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},(0,a.yg)("a",{parentName:"td",href:"https://github.com/Shopify/hydrogen/tree/main/packages/eslint-plugin/src/rules/client-component-banned-hooks"},"client-component-banned-hooks")),(0,a.yg)("td",{parentName:"tr",align:null},"Prevents using the ",(0,a.yg)("inlineCode",{parentName:"td"},"useQuery")," hook in files that end with the ",(0,a.yg)("inlineCode",{parentName:"td"},".client")," extension")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},(0,a.yg)("a",{parentName:"td",href:"https://github.com/Shopify/hydrogen/tree/main/packages/eslint-plugin/src/rules/prefer-image-component"},"prefer-image-component")),(0,a.yg)("td",{parentName:"tr",align:null},"Prevents using the ",(0,a.yg)("inlineCode",{parentName:"td"},"img")," tag directly and suggests using the ",(0,a.yg)("a",{parentName:"td",href:"/components/primitive/image/"},(0,a.yg)("inlineCode",{parentName:"a"},"Image"))," component from ",(0,a.yg)("inlineCode",{parentName:"td"},"@shopify/hydrogen"))),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},(0,a.yg)("a",{parentName:"td",href:"https://github.com/Shopify/hydrogen/tree/main/packages/eslint-plugin/src/rules/server-no-json-parse"},"server-no-json-parse")),(0,a.yg)("td",{parentName:"tr",align:null},"Prevents using ",(0,a.yg)("inlineCode",{parentName:"td"},"JSON.parse")," in a Hydrogen API route or server component")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},(0,a.yg)("a",{parentName:"td",href:"https://github.com/Shopify/hydrogen/tree/main/packages/eslint-plugin/src/rules/prefer-gql"},"prefer-gql")),(0,a.yg)("td",{parentName:"tr",align:null},"Detects the use of a GraphQL utility other than the one provided by Hydrogen")))),(0,a.yg)("h2",{id:"next-steps"},"Next steps"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Learn about best practices for making your Hydrogen custom storefront ",(0,a.yg)("a",{parentName:"li",href:"/tutorials/best-practices/accessibility/"},"accessible")," and ",(0,a.yg)("a",{parentName:"li",href:"/tutorials/best-practices/performance/"},"performant"),".")))}u.isMDXComponent=!0},5680:(e,t,n)=>{n.d(t,{xA:()=>g,yg:()=>d});var r=n(6540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},g=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},y=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,g=s(e,["components","mdxType","originalType","parentName"]),c=p(n),y=a,d=c["".concat(l,".").concat(y)]||c[y]||u[y]||o;return n?r.createElement(d,i(i({ref:t},g),{},{components:n})):r.createElement(d,i({ref:t},g))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=y;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:a,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}y.displayName="MDXCreateElement"}}]);