"use strict";(self.webpackChunkdocs_v_1=self.webpackChunkdocs_v_1||[]).push([[9595],{5680:(e,t,r)=>{r.d(t,{xA:()=>p,yg:()=>m});var n=r(6540);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),d=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},y=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),g=d(r),y=a,m=g["".concat(l,".").concat(y)]||g[y]||u[y]||o;return r?n.createElement(m,i(i({ref:t},p),{},{components:r})):n.createElement(m,i({ref:t},p))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=y;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[g]="string"==typeof e?e:a,i[1]=s;for(var d=2;d<o;d++)i[d]=r[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}y.displayName="MDXCreateElement"},4672:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var n=r(8168),a=(r(6540),r(5680));const o={slug:"/migrate"},i="Migrate from Hydrogen v1 to v2",s={unversionedId:"migrate-v2",id:"migrate-v2",title:"Migrate from Hydrogen v1 to v2",description:"The recommended method for upgrading from Hydrogen v1 to  is to create a new Hydrogen project and transfer required features and assets manually.",source:"@site/docs/migrate-v2.md",sourceDirName:".",slug:"/migrate",permalink:"/hydrogen-v1/migrate",draft:!1,tags:[],version:"current",frontMatter:{slug:"/migrate"},sidebar:"hydrogen",previous:{title:"Hydrogen overview",permalink:"/hydrogen-v1/"},next:{title:"Tutorials",permalink:"/hydrogen-v1/tutorials"}},l={},d=[{value:"Key differences between Hydrogen v1 and Hydrogen v2",id:"key-differences-between-hydrogen-v1-and-hydrogen-v2",level:2},{value:"Routes",id:"routes",level:2},{value:"API routes",id:"api-routes",level:3},{value:"404 route",id:"404-route",level:3},{value:"Moving static assets",id:"moving-static-assets",level:2},{value:"CSS",id:"css",level:3}],p={toc:d},g="wrapper";function u(e){let{components:t,...r}=e;return(0,a.yg)(g,(0,n.A)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"migrate-from-hydrogen-v1-to-v2"},"Migrate from Hydrogen v1 to v2"),(0,a.yg)("p",null,"The recommended method for upgrading from Hydrogen v1 to  is to ",(0,a.yg)("a",{parentName:"p",href:"https://shopify.dev/docs/custom-storefronts/hydrogen/getting-started"},"create a new Hydrogen project")," and transfer required features and assets manually."),(0,a.yg)("h2",{id:"key-differences-between-hydrogen-v1-and-hydrogen-v2"},"Key differences between Hydrogen v1 and Hydrogen v2"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Hydrogen now ",(0,a.yg)("a",{parentName:"li",href:"https://hydrogen.shopify.dev/update/remixing-hydrogen"},"uses Remix as its foundational framework"),". Remix promotes server-side rendering, web standard technologies, and principles of progressive enhancement to boost site performance. Hydrogen provides a collection of components, utilities, and design patterns that make it easier and more performant to work with Shopify APIs."),(0,a.yg)("li",{parentName:"ul"},"Hydrogen no longer uses React Server Components. Use ",(0,a.yg)("a",{parentName:"li",href:"https://remix.run/docs/en/main/route/loader"},"Remix loader functions")," instead."),(0,a.yg)("li",{parentName:"ul"},"Since version 2023.1, Hydrogen has been ",(0,a.yg)("a",{parentName:"li",href:"https://calver.org/"},"calendar versioned"),". This keeps Hydrogen's features in sync with Shopify's ",(0,a.yg)("a",{parentName:"li",href:"https://shopify.dev/docs/api/usage/versioning"},"API versioning"),".")),(0,a.yg)("p",null,"To quickly get up to speed on Remix, we recommend completing its ",(0,a.yg)("a",{parentName:"p",href:"https://remix.run/docs/en/main/start/tutorial"},"30-minute introductory tutorial"),"."),(0,a.yg)("h2",{id:"routes"},"Routes"),(0,a.yg)("p",null,"Remix uses ",(0,a.yg)("a",{parentName:"p",href:"https://remix.run/docs/en/main/discussion/routes"},"nested routes")," to define the site path."),(0,a.yg)("p",null,"Hydrogen's default ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/Shopify/hydrogen/tree/main/templates/skeleton"},"Skeleton template"),' includes all of Shopify\'s standard storefront routes. When setting up a new Hydrogen project, select the option to "scaffold routes and core functionality" to set up these routes autoatically.'),(0,a.yg)("p",null,"You can also scaffold routes after the fact by ",(0,a.yg)("a",{parentName:"p",href:"https://shopify.dev/docs/api/shopify-cli/hydrogen/hydrogen-generate-routes"},"using the Hydrogen CLI"),":"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-sh"},"# Run in your new Hydrogen project\nnpx shopify hydrogen generate routes\n")),(0,a.yg)("p",null,"For reference, this table compares some typical Hydrogen v1 route files with their Remix equivalents. However, we don't recommend creating every file manually; the ",(0,a.yg)("inlineCode",{parentName:"p"},"generate routes")," command is the most reliable method to create consistent results."),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},(0,a.yg)("strong",{parentName:"th"},"Hydrogen v1")),(0,a.yg)("th",{parentName:"tr",align:null},(0,a.yg)("strong",{parentName:"th"},"Hydrogen with Remix")))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"index.html"),(0,a.yg)("td",{parentName:"tr",align:null},"root.jsx")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"robots.txt.server.js"),(0,a.yg)("td",{parentName:"tr",align:null},"[robots.txt]",".jsx")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"sitemap.xml.server.ts"),(0,a.yg)("td",{parentName:"tr",align:null},"[sitemap.xml]",".jsx")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"products/","[handle]",".server.jsx"),(0,a.yg)("td",{parentName:"tr",align:null},"products.$handle.jsx")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"policies/","[handle]",".server.jsx"),(0,a.yg)("td",{parentName:"tr",align:null},"policies.$handle.jsx")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"collections/","[handle]",".server.jsx"),(0,a.yg)("td",{parentName:"tr",align:null},"collections.$handle.jsx")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"pages/","[handle]",".server.jsx"),(0,a.yg)("td",{parentName:"tr",align:null},"pages.$handle.jsx")))),(0,a.yg)("h3",{id:"api-routes"},"API routes"),(0,a.yg)("p",null,"In Remix, instead of a separate pattern for API routes, ",(0,a.yg)("inlineCode",{parentName:"p"},"loader")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"action")," functions serve as the same purpose \u2014 ",(0,a.yg)("a",{parentName:"p",href:"https://remix.run/docs/en/main/guides/api-routes#routes-are-their-own-api"},"routes are their own API"),"."),(0,a.yg)("h3",{id:"404-route"},"404 route"),(0,a.yg)("p",null,"Hydrogen v1 handled 404 pages with a wildcard route defined in ",(0,a.yg)("inlineCode",{parentName:"p"},"App.server.jsx"),". Remix also needs a wildcard route; in Remix, these are called ",(0,a.yg)("a",{parentName:"p",href:"https://remix.run/docs/en/main/file-conventions/routes#splat-routes"},"Splat Routes"),"."),(0,a.yg)("p",null,"A standard 404 route is generated when setting up a new Hydrogen project if you opt to ",(0,a.yg)("a",{parentName:"p",href:"#routes"},"scaffold the standard routes"),". Consult the Skeleton template's ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/Shopify/hydrogen/blob/main/templates/skeleton/app/routes/%24.tsx"},"404 route file on GitHub")," if you want to set it up yourself."),(0,a.yg)("h2",{id:"moving-static-assets"},"Moving static assets"),(0,a.yg)("p",null,"Remix features two directories that can contain static assets:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("inlineCode",{parentName:"li"},"public")," is for static files that should be uploaded directly to Shopify's CDN without being processed by Vite. Files in this directory will be available relative to the site root when deployed. You can hard-code their paths in site files."),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("inlineCode",{parentName:"li"},"app/assets")," is for static files that will be imported in your site files and will be processed by Vite. File names may be hashed and the files themselves may be optimized or bundled during the build process.")),(0,a.yg)("h3",{id:"css"},"CSS"),(0,a.yg)("p",null,"Remix uses Vite for bundling and optimization, so all of ",(0,a.yg)("a",{parentName:"p",href:"https://vitejs.dev/guide/features#css"},"Vite's standard CSS methods")," are available in Hydrogen."))}u.isMDXComponent=!0}}]);